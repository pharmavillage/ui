'use strict';function e(e){return e&&'object'==typeof e&&'default'in e?e.default:e}function t(e,t){var r=this;void 0===t&&(t={immediate:1}),console.error('$watchAsStore is deprecated');var o=n.createEvent(),i=n.restore(o,{}),c=function(){r.$watch(e,(function(e,t){o({oldValue:t,newValue:e})}),t)};return this._data?c():this.$once('hook:created',c),i}function r(e){return console.error('$store is deprecated'),this.$watchAsStore(e).map((function(e){return e.newValue}))}Object.defineProperty(exports,'__esModule',{value:1});var o=require('vue'),n=require('effector/compat'),i=e(o),c={beforeCreate:function(){var e=this,t=this.$options.effector;if("function"==typeof t&&(t=t.call(this)),t){this.$options.computed||(this.$options.computed={});var r={};if(n.is.store(t))r={state:t};else{if('object'!=typeof t)throw Error('property should be Store');r=Object.assign({},t)}this.__clear=n.createEvent(),n.withRegion(this.__clear,(function(){var t={},o=0;for(var c in r){var a=r[c];if(n.is.store(a))t[c]=a;else{if(!n.is.event(a)&&!n.is.effect(a))throw Error("Effector property "+c+" should be Store or Unit (will be transform to Store<number>)");t[c]=n.restore(a.map((function(){return++o})),null)}}var f=n.combine(t);for(var s in f.defaultState)i.util.defineReactive(e,s,f.defaultState[s]);f.watch((function(t){for(var r in t)e[r]=t[r]}));var u=function(r){var o=n.createEvent();n.forward({from:o,to:t[r]}),e.$options.computed[r]={get:function(){return e[r]},set:o}};for(var l in t)u(l)}))}},beforeDestroy:function(){this.__clear&&n.clearNode(this.__clear)}};exports.VueEffector=function(e){e.mixin(c),e.prototype.$watchAsStore=t,e.prototype.$store=r},exports.createComponent=function(e,t){return i.extend(Object.assign({},e,t&&{effector:function(){return t}}))};
//# sourceMappingURL=compat.js.map
