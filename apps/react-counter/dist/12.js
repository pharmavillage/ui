/*! For license information please see 12.js.LICENSE.txt */
"use strict";(self.webpackChunkshell=self.webpackChunkshell||[]).push([[12],{26:(e,t,r)=>{var n=r(432),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,i=n.useEffect,l=n.useLayoutEffect,s=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),a=n[0].inst,c=n[1];return l((function(){a.value=r,a.getSnapshot=t,u(a)&&c({inst:a})}),[e,r,t]),i((function(){return u(a)&&c({inst:a}),e((function(){u(a)&&c({inst:a})}))}),[e]),s(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},965:(e,t,r)=>{var n=r(432),a=r(139),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,l=n.useRef,s=n.useEffect,u=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var f=l(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=u((function(){function e(e){if(!s){if(s=!0,i=e,e=n(e),void 0!==a&&d.hasValue){var t=d.value;if(a(t,e))return l=t}return l=e}if(t=l,o(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?t:(i=e,l=r)}var i,l,s=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,n,a]);var p=i(e,f[0],f[1]);return s((function(){d.hasValue=!0,d.value=p}),[p]),c(p),p}},139:(e,t,r)=>{e.exports=r(26)},121:(e,t,r)=>{e.exports=r(965)},12:(e,t,r)=>{r.r(t),r.d(t,{Provider:()=>jt,connect:()=>Et,createComponent:()=>mt,createContextComponent:()=>At,createGate:()=>gt,createReactState:()=>Nt,createStoreConsumer:()=>ht,useEvent:()=>st,useGate:()=>pt,useList:()=>dt,useStore:()=>ut,useStoreMap:()=>ft,useUnit:()=>ct});var n=r(896);function a(e,t){for(let r in e)t(e[r],r)}function o(e,t){e.forEach(t)}function i(e,t){if(!e)throw Error(t)}function l({node:e=[],from:t,source:r,parent:n=t||r,to:a,target:i,child:l=a||i,scope:s={},meta:u={},family:c={type:"regular"},regional:f}={}){let d=X(n),p=X(c.links),m=X(c.owners),h=[];o(e,(e=>e&&B(h,e)));let y={id:_(),seq:h,next:X(l),meta:u,scope:s,family:{type:c.type||"crosslink",links:p,owners:m}};return o(p,(e=>B(k(e),y))),o(m,(e=>B(w(e),y))),o(d,(e=>B(e.next,y))),f&&G&&Q($(G),[y]),y}function s(e,t,r){let n,a=Oe,i=null,l=Ae;if(e.target&&(t=e.params,r=e.defer,n=e.meta,a="page"in e?e.page:a,e.stack&&(i=e.stack),l=R(e)||l,e=e.target),l&&Ae&&l!==Ae&&(Ae=null),Array.isArray(e))for(let r=0;r<e.length;r++)$e("pure",a,S(e[r]),i,t[r],l,n);else $e("pure",a,S(e),i,t,l,n);if(r&&!Ee)return;let s,u,c,f,d,p,m={isRoot:Ee,currentPage:Oe,scope:Ae,isWatch:Ne,isPure:Me};Ee=0;e:for(;f=xe();){let{idx:e,stack:t,type:r}=f;c=t.node,Oe=d=t.page,Ae=R(t),d?p=d.reg:Ae&&(p=Ae.reg);let n=!!d,a=!!Ae,i={fail:0,scope:c.scope};s=u=0;for(let o=e;o<c.seq.length&&!s;o++){let l=c.seq[o];if(l.order){let{priority:n,barrierID:a}=l.order,i=a?d?`${d.fullID}_${a}`:a:0;if(o!==e||r!==n){a?Re.has(i)||(Re.add(i),Ce(o,t,n,a)):Ce(o,t,n);continue e}a&&Re.delete(i)}switch(l.type){case"mov":{let e,r=l.data;switch(r.from){case b:e=$(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(p&&!p[r.store.id])if(n){let e=Ie(d,r.store.id);t.page=d=e,e?p=e.reg:a?(Le(Ae,r.store,0,1,r.softRead),p=Ae.reg):p=void 0}else a&&Le(Ae,r.store,0,1,r.softRead);e=ve(p&&p[r.store.id]||r.store)}switch(r.to){case b:t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":Pe(d,Ae,c,r.target).current=e}break}case"compute":let e=l.data;if(e.fn){Ne="watch"===A(c,"op"),Me=e.pure;let r=e.safe?(0,e.fn)($(t),i.scope,t):Ke(i,e.fn,t);e.filter?u=!r:t.value=r,Ne=m.isWatch,Me=m.isPure}}s=i.fail||u}if(Ve&&Ve(t,i),!s){let e=$(t),r=R(t);if(o(c.next,(n=>{$e("child",d,n,t,e,r)})),r){A(c,"needFxCounter")&&$e("child",d,r.fxCount,t,e,r),A(c,"storeChange")&&$e("child",d,r.storeChange,t,e,r),A(c,"warnSerialize")&&$e("child",d,r.warnSerializeNode,t,e,r);let n=r.additionalLinks[c.id];n&&o(n,(n=>{$e("child",d,n,t,e,r)}))}}}Ee=m.isRoot,Oe=m.currentPage,Ae=R(m)}function u(e,t="combine"){let r=t+"(",n="",o=0;return a(e,(e=>{o<25&&(null!=e&&(r+=n,r+=M(e)?N(e).fullName:e.toString()),o+=1,n=", ")})),r+")"}function c(e,t){let r=t?e:e[0];te(r);let n=r.or,a=r.and;if(a){let r=t?a:a[0];if(Y(r)&&"and"in r){let r=c(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function f(e,...t){let r=H();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function d(e,t){let r=Be({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(U(!A(n,"derived"),"call of derived event","createEvent"),U(!Me,"unit call from pure function","operators like sample"),Oe?((e,t,r,n)=>{let a=Oe,o=null;if(t)for(o=Oe;o&&o.template!==t;)o=j(o);ze(o);let i=e.create(r,n);return ze(a),i})(n,a,e,t):n.create(e,t)),a=H(),o=Object.assign(n,{graphite:l({meta:Je(r.actualOp||"event",n,r),regional:1}),create:e=>(s({target:n,params:e,scope:Ae}),e),watch:e=>Te(n,e),map:e=>Qe(n,g,e,[me()]),filter:e=>Qe(n,"filter",e.fn?e:e.fn,[me(ie,1)]),filterMap:e=>Qe(n,"filterMap",e,[me(),de((e=>!ee(e)),1)]),prepend(e){let t=d("* → "+n.shortName,{parent:j(n)});return f("eventPrepend",S(t)),Ge(t,n,[me()],"prepend",e),He(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),E(o,"id",o.graphite.id),T(o.graphite),o}function p(e,t,r,n){return ne(r,t,"first argument"),i(Z(n),"second argument should be a function"),U(!A(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),o(Array.isArray(r)?r:[r],(t=>{e.off(t),C(e).set(t,_e(Xe(t,e,"on",oe,n)))})),e}function m(e,t){let r=Be(t),n=ye(e),a=d({named:"updates",derived:1});f("storeBase",n);let u=n.id,c={subscribers:new Map,updates:a,defaultState:e,stateRef:n,getState(){let e,t=n;if(Oe){let t=Oe;for(;t&&!t.reg[u];)t=j(t);t&&(e=t)}return!e&&Ae&&(Le(Ae,n,1),e=Ae),e&&(t=e.reg[u]),ve(t)},setState:e=>s({target:c,params:e,defer:1,scope:Ae}),reset:(...e)=>(o(e,(e=>p(c,".reset",e,(()=>c.defaultState)))),c),on:(e,t)=>p(c,".on",e,t),off(e){let t=C(c).get(e);return t&&(t(),C(c).delete(e)),c},map(e,t){let r,a;Y(e)&&(r=e,e=e.fn),U(ee(t),"second argument of store.map","updateFilter");let o=c.getState();H()?a=null:ee(o)||(a=e(o,t));let i=m(a,{name:`${c.shortName} → *`,derived:1,and:r}),l=Xe(c,i,g,ae,e);return ge(x(i),{type:g,fn:e,from:n}),x(i).noInit=1,f("storeMap",n,l),i},watch(e,t){if(!t||!M(e)){let t=Te(c,e);return f("storeWatch",n,e)||e(c.getState()),t}return i(Z(t),"second argument should be a function"),e.watch((e=>t(c.getState(),e)))}},h=Je("store",c,r),y=c.defaultConfig.updateFilter;c.graphite=l({scope:{state:n,fn:y},node:[de(((e,t,r)=>(r.scope&&!r.scope.reg[n.id]&&(r.b=1),e))),pe(n),de(((e,t,{a:r,b:n})=>!ee(e)&&(e!==r||n)),1),y&&me(ae,1),ue({from:b,target:n})],child:a,meta:{...h,defaultState:e},regional:1}),E(c,"id",c.graphite.id),E(c,"rootStateRefId",u);let v=A(c,"serialize"),S=A(c,"derived"),k="ignore"===v,w=A(c,"sid");return w&&(E(c,"storeChange",1),n.sid=w),w||k||S||E(c,"warnSerialize",1),i(S||!ee(e),"current state can't be undefined, use null instead"),Q(c,[a]),null!=r&&r.domain&&r.domain.hooks.store(c),S||(c.reinit=d({named:"reinit"}),c.reset(c.reinit)),n.meta=c.graphite.meta,T(c.graphite),c}function h(...e){let t,r,n;[e,n]=c(e);let a,o,l,s=e[e.length-1];if(Z(s)?(r=e.slice(0,-1),t=s):r=e,1===r.length){let e=r[0];z(e)||(a=e,o=1)}if(!o&&(a=r,t)){l=1;let e=t;t=t=>e(...t)}return i(Y(a),"shape should be an object"),Ye(Array.isArray(a),!l,a,n,t)}function y(e,{scope:t,safe:r}={}){i(t||Ae||r,"scopeBind cannot be called outside of forked .watch");let n=t||Ae;return V(e)?t=>{let r=function(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}();return s({target:e,params:{params:t,req:r},scope:n}),r.req}:t=>(s({target:e,params:t,scope:n}),t)}let v="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",g="map",b="stack",S=e=>e.graphite||e,k=e=>e.family.owners,w=e=>e.family.links,x=e=>e.stateRef,$=e=>e.value,C=e=>e.subscribers,j=e=>e.parent,R=e=>e.scope,A=(e,t)=>S(e).meta[t],E=(e,t,r)=>S(e).meta[t]=r,N=e=>e.compositeName,M=e=>(Z(e)||Y(e))&&"kind"in e;const O=e=>t=>M(t)&&t.kind===e;let z=O("store"),I=O("event"),V=O("effect"),P=O("domain"),q=O("scope");var L={__proto__:null,unit:M,store:z,event:I,effect:V,domain:P,scope:q,attached:e=>V(e)&&1==A(e,"attached")};let K=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},B=(e,t)=>e.push(t),U=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const D=()=>{let e=0;return()=>""+ ++e};let F=D(),W=D(),_=D(),G=(D(),null),T=e=>{},H=()=>G&&G.template,J=e=>(e&&G&&G.sidRoot&&(e=`${G.sidRoot}|${e}`),e),Q=(e,t)=>{let r=S(e);o(t,(e=>{let t=S(e);"domain"!==r.family.type&&(t.family.type="crosslink"),B(k(t),r),B(w(r),t)}))},X=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(S),Y=e=>"object"==typeof e&&null!==e,Z=e=>"function"==typeof e,ee=e=>void 0===e,te=e=>i(Y(e)||Z(e),"expect first argument be an object");const re=(e,t,r,n)=>i(!(!Y(e)&&!Z(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let ne=(e,t,r)=>{Array.isArray(e)?o(e,((e,n)=>re(e,t,`${n} item of ${r}`,""))):re(e,t,r," or array of units")},ae=(e,{fn:t},{a:r})=>t(e,r),oe=(e,{fn:t},{a:r})=>t(r,e),ie=(e,{fn:t})=>t(e);const le=(e,t,r,n)=>{let a={id:W(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++se)),a};let se=0,ue=({from:e="store",store:t,target:r,to:n=(r?"store":b),batch:a,priority:o})=>le("mov",{from:e,store:t,to:n,target:r},o,a),ce=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>le("compute",{fn:e,safe:n,filter:a,pure:o},r,t),fe=({fn:e})=>ce({fn:e,priority:"effect"}),de=(e,t,r)=>ce({fn:e,safe:1,filter:t,priority:r&&"effect"}),pe=(e,t,r)=>ue({store:e,to:t?b:"a",priority:r&&"sampler",batch:1}),me=(e=ie,t)=>ce({fn:e,pure:1,filter:t}),he={mov:ue,compute:ce,filter:({fn:e,pure:t})=>ce({fn:e,filter:1,pure:t}),run:fe},ye=e=>({id:W(),current:e}),ve=({current:e})=>e,ge=(e,t)=>{e.before||(e.before=[]),B(e.before,t)},be=null;const Se=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||je(e.v.type)>je(t.v.type))&&(r=e,e=t,t=r),r=Se(e.r,t),e.r=e.l,e.l=r,e},ke=[];let we=0;for(;we<6;)B(ke,{first:null,last:null,size:0}),we+=1;const xe=()=>{for(let e=0;e<6;e++){let t=ke[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=be.v;return be=Se(be.l,be.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},$e=(e,t,r,n,a,o,i)=>Ce(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:i},e),Ce=(e,t,r,n=0)=>{let a=je(r),o=ke[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?be=Se(be,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},je=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Re=new Set;let Ae,Ee=1,Ne=0,Me=0,Oe=null,ze=e=>{Oe=e};const Ie=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=j(e);if(e)return e}return null};let Ve,Pe=(e,t,r,n,a)=>{let o=Ie(e,n.id);return o?o.reg[n.id]:t?(Le(t,n,a),t.reg[n.id]):n};const qe=e=>e;let Le=(e,t,r,n,a)=>{var i;let l=e.reg;if(l[t.id])return;let s=t.sid,u=null==t||null===(i=t.meta)||void 0===i?void 0:i.serialize,c=e.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||qe,f={id:t.id,current:t.current,meta:t.meta};if(f.id in e.values.idMap)f.current=e.values.idMap[f.id];else if(s&&s in e.values.sidMap&&!(s in e.sidIdMap))f.current=c(e.values.sidMap[s]);else if(t.before&&!a){let a=0,i=r||!t.noInit||n;o(t.before,(t=>{switch(t.type){case g:{let a=t.from;if(a||t.fn){a&&Le(e,a,r,n);let o=a&&l[a.id].current;i&&(f.current=t.fn?t.fn(o):o)}break}case"field":a||(a=1,f.current=Array.isArray(f.current)?[...f.current]:{...f.current}),Le(e,t.from,r,n),i&&(f.current[t.field]=l[l[t.from.id].id].current)}}))}s&&(e.sidIdMap[s]=t.id),l[t.id]=f};const Ke=(e,t,r)=>{try{return t($(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}};let Be=(e,t={})=>(Y(e)&&(Be(e.or,t),a(e,((e,r)=>{ee(e)||"or"===r||"and"===r||(t[r]=e)})),Be(e.and,t)),t);const Ue=(e,t)=>{K(e.next,t),K(k(e),t),K(w(e),t)},De=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=w(e);for(;n=a.pop();)Ue(n,e),(t||r&&"sample"!==A(e,"op")||"crosslink"===n.family.type)&&De(n,t,"on"!==A(n,"op")&&r);for(a=k(e);n=a.pop();)Ue(n,e),r&&"crosslink"===n.family.type&&De(n,t,"on"!==A(n,"op")&&r)},Fe=e=>e.clear();let We=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),z(e))Fe(C(e));else if(P(e)){r=1;let t=e.history;Fe(t.events),Fe(t.effects),Fe(t.stores),Fe(t.domains)}De(S(e),!!t,r)},_e=e=>{let t=()=>We(e);return t.unsubscribe=t,t},Ge=(e,t,r,n,a)=>l({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),Te=(e,t)=>(i(Z(t),".watch argument should be a function"),_e(l({scope:{fn:t},node:[fe({fn:ie})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),He=(e,t,r="event")=>{j(e)&&j(e).hooks[r](t)},Je=(e,t,r)=>{let n=Be(r),a="domain"===e,o=F(),{sid:i=null,named:l=null,domain:s=null,parent:u=s}=n,c=l||n.name||(a?"":o),f=function(e,t){let r,n,a=e;if(t){let a=N(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}(c,u),d={op:t.kind=e,name:t.shortName=c,sid:t.sid=J(i),named:l,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=u,t.compositeName=f,t.defaultConfig=n,t.thru=e=>(U(0,"thru","js pipe"),e(t)),t.getType=()=>f.fullName,!a){t.subscribe=e=>(te(e),t.watch(Z(e)?e:t=>e.next&&e.next(t))),t[v]=()=>t;let e=H();e&&(d.nativeTemplate=e)}return d};const Qe=(e,t,r,n)=>{let a;Y(r)&&(a=r,r=r.fn);let o=d({name:`${e.shortName} → *`,derived:1,and:a});return Ge(e,o,n,t,r),o},Xe=(e,t,r,n,a)=>{let o=x(t),i=ue({store:o,to:"a",priority:"read"});r===g&&(i.data.softRead=1);let l=[i,me(n)];return f("storeOnMap",o,l,z(e)&&x(e)),Ge(e,t,l,r,a)},Ye=(e,t,r,n,o)=>{let l=e?e=>[...e]:e=>({...e}),s=e?[]:{},c=l(s),d=ye(c),p=ye(1);d.type=e?"list":"shape",d.noInit=1,f("combineBase",d,p);let h=m(c,{name:u(r),derived:1,and:n}),y=x(h);y.noInit=1,E(h,"isCombine",1);let v=pe(d);v.order={priority:"barrier"};let b=ue({store:y,to:"b",priority:"read"});b.data.softRead=1;let S=[de(((e,t,r)=>(r.scope&&!r.scope.reg[d.id]&&(r.c=1),e))),v,ue({store:p,to:"b"}),de(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=l(n.a)),n.a[r]=e,1}),1),ue({from:"a",target:d}),ue({from:"value",store:0,target:p}),ue({from:"value",store:1,target:p,priority:"barrier",batch:1}),pe(d,1),o&&me(),b];return a(r,((e,t)=>{if(!z(e))return i(!M(e)&&!ee(e),`combine expects a store in a field ${t}`),void(c[t]=s[t]=e);s[t]=e.defaultState,c[t]=e.getState();let r=Ge(e,h,S,"combine",o);r.scope.key=t;let n=x(e);ge(d,{type:"field",field:t,from:n}),f("combineField",n,r)})),h.defaultShape=r,ge(y,{type:g,from:d,fn:o}),H()||(h.defaultState=o?y.current=o(c):s),h};l({node:[fe({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}});var Ze=r(121),et=r(139);function tt(e,t,r,n){let a=[he.mov({store:e.stateRef,to:"stack"}),he.run({fn:e=>t(e)})];if(n&&a.unshift(n),r){let t=l({node:a,meta:{watchOp:"store"}}),n=e.graphite.id,o=r.additionalLinks,i=o[n]||[];return o[n]=i,i.push(t),()=>{let e=i.indexOf(t);-1!==e&&i.splice(e,1),We(t)}}{let t=l({node:a,parent:[e],family:{owners:e}});return()=>{We(t)}}}function rt(e,t){return t.displayName=e,t}function nt(e,t){L.store(e)||bt("expect useStore argument to be a store");let r=n.useCallback((r=>tt(e,r,t)),[e,t]),a=n.useCallback((()=>xt(e,t)),[e,t]);return kt(r,a,a)}function at(e,t){let r=L.unit(e),a={};r?a={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?a=e["@@unitShape"]():bt("expect @@unitShape to be a function"):a=e;let o=Array.isArray(a),i=n.useRef({stale:1,justSubscribed:0,scope:t}),[l,s,u,c,f]=n.useMemo((()=>{i.current.stale=1;let e=Array.isArray(a)?[]:{},r=[],n=[],o=[],l=[];for(let i in a){let s=a[i];L.unit(s)||bt("expect useUnit argument to be a unit"),L.event(s)||L.effect(s)?(e[i]=t?y(s,{scope:t}):s,o.push(i),l.push(s)):(e[i]=null,r.push(i),n.push(s))}return[e,r,n,o,l]}),[i,t,...Object.keys(a),...Object.values(a)]),d=n.useRef({value:l,storeKeys:s,eventKeys:c,eventValues:f}),p=n.useCallback((e=>{let r=i.current;r.justSubscribed=1;let n=()=>{r.stale||(r.stale=1,e())},a=he.compute({priority:"sampler",batch:1}),o=u.map((e=>tt(e,n,t,a)));return()=>{o.forEach((e=>e()))}}),[u,t,d,i]),m=n.useCallback((()=>{let e,n=d.current,a=i.current,p=0,m=n.value,h=n.storeKeys,y=n.eventKeys,v=n.eventValues,g=t!==a.scope;if(a.stale||a.justSubscribed||g){p=!a.justSubscribed||g,e=o?[...l]:{...l},h.length===s.length&&y.length===c.length||(p=1);for(let r=0;r<s.length;r++){let n=xt(u[r],t),a=s[r];p||(p=h.includes(a)?m[a]!==n:1),e[a]=n}for(let e=0;e<c.length;e++){let t=f[e],r=c[e];p||(p=y.includes(r)?v[y.indexOf(r)]!==t:1)}}return p&&(n.value=e),n.storeKeys=s,n.eventKeys=c,n.eventValues=f,a.stale=0,a.justSubscribed=!p,a.scope=t,r?n.value.unit:n.value}),[p,u,f,t,d,i]);return kt(p,m,m)}function ot([e,t],r){let a,o,i,l,s=$t;t?(a=t,i=e,l=[]):({fn:a,store:i,keys:l,defaultValue:o,updateFilter:s=$t}=e),L.store(i)||bt("useStoreMap expects a store"),Array.isArray(l)||bt("useStoreMap expects an array as keys"),"function"!=typeof a&&bt("useStoreMap expects a function");let u=n.useCallback((e=>tt(i,e,r)),[i,r]),c=n.useCallback((()=>xt(i,r)),[i,r]),f=n.useRef(),d=n.useRef(),p=n.useRef(l);return wt(u,c,c,(e=>{if(f.current!==e||!((e,t)=>{if(!e||!t||e.length!==t.length)return 0;let r=1;for(let n=0;n<e.length;n++)if(e[n]!==t[n]){r=0;break}return r})(p.current,l)){let t=a(e,l);void 0===t&&void 0!==o&&(t=o),f.current=e,p.current=l,void 0!==t&&(d.current=t)}return d.current}),((e,t)=>!s(t,e)))}function it(e,t={},r){let{open:a,close:o,set:i}=at({open:e.open,close:e.close,set:e.set},r),l=n.useMemo((()=>({open:a,close:o,set:i})),[e,a]),s=n.useRef({value:null,count:0});St((()=>(l.open(s.current.value),()=>l.close(s.current.value))),[l]),((e,t)=>{if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let a=r[n];if(e[a]!==t[a])return 0}return 1}return 0})(s.current.value,t)||(s.current.value=t,s.current.count+=1),St((()=>{l.set(s.current.value)}),[s.current.count])}function lt(e){let t=n.useContext(Ct);return e&&!t&&bt("No scope found, consider adding <Provider> to app root"),t}function st(e,t){return((e,t)=>{if(!t)return e;let r=L.unit(e)||"object"!=typeof e?{event:e}:e;return n.useMemo((()=>{if(L.unit(e))return y(e,{scope:t});let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=y(e[n],{scope:t});return r}),[t,...Object.keys(r),...Object.values(r)])})(e,lt(null==t?void 0:t.forceScope))}function ut(e,t){return nt(e,lt(null==t?void 0:t.forceScope))}function ct(e,t){return at(e,lt(null==t?void 0:t.forceScope))}function ft(e,t){return ot([e,t],lt(null==e?void 0:e.forceScope))}function dt(e,t,r){return((e,t,r)=>{let a,o,i,l=[];"object"==typeof t&&null!==t?(t.keys&&(l=t.keys),({fn:a,getKey:o,placeholder:i}=t)):a=t,L.store(e)||bt("expect useList first argument to be a store"),"function"!=typeof a&&bt("expect useList's renderItem to be a function"),Array.isArray(l)||bt("expect useList's keys to be an array");let s=n.useMemo((()=>{let t=rt(`${e.shortName||"Unknown"}.Item`,(t=>{let{index:n,keys:a,keyVal:o,value:i}=t;if(u.current[1])return u.current[0](i,o);let l=ot([{store:e,keys:[n,...a],fn:(e,t)=>e[t[0]]}],r);return u.current[0](l,n)}));return n.memo(t)}),[e,r,!!o]),u=n.useRef([a,o]);u.current=[a,o];let c=n.useMemo((()=>l),l);if(o){let t=nt(e,r);return 0===t.length&&i?i:t.map((e=>{let t=u.current[1](e);return n.createElement(s,{keyVal:t,key:t,keys:c,value:e})}))}{let t=ot([{store:e,keys:[e],fn:e=>e.length}],r);return 0===t&&i?i:Array.from({length:t},((e,t)=>n.createElement(s,{index:t,key:t,keys:c})))}})(e,t,lt(null==r?void 0:r.forceScope))}function pt(e,t={},r){return it(e,t,lt(null==r?void 0:r.forceScope))}function mt(e,t){function r(e){let r=n.useRef(e),o=ut(a);St((()=>(i({props:r.current,state:a.getState()}),()=>{l({props:r.current,state:a.getState()})})),[]);let s=t(e,o);return r.current=e,s}let a;L.store(e)?a=e:"object"==typeof e&&null!==e?a=h(e):bt("shape should be a store or object with stores");let o="Unknown";a&&a.shortName&&(o=a.shortName);let i=d(),l=d();return r.mounted=i,r.unmounted=l,rt(`${o}.View`,r)}function ht(e){return mt(e,(({children:e},t)=>e(t)))}function yt(e,t){let r=t?e:e[0];var n;(e=>{if(!e)throw Error("expect first argument be an object")})(Mt(n=r)||(e=>"function"==typeof e)(n));let a=r.or,o=r.and;if(o){let r=t?o:o[0];if(Mt(r)&&"and"in r){let r=yt(o,t);e=r[0],a={...a,...r[1]}}else e=o}return[e,a]}function vt(e,t){let r=t&&Mt(n=t[0])&&(n.and||n.or)?t:[{and:t}];var n;let a,[[o,i],l]=yt(r),s={},u={},c=l;var f;return"string"==typeof o?(u={name:o},Mt(f=i)&&"sid"in f||(s=i||{})):(e=>Mt(e)&&("domain"in e||"defaultState"in e||"name"in e))(o)&&(u=o,s=o.defaultState||{},a=o.domain),{hook:e,domain:a,defaultState:s,mainConfig:u,maybeConfig:c}}function gt(...e){return(({domain:e,defaultState:t,hook:r,mainConfig:n,maybeConfig:a})=>{function o(e){return r(o,e,lt()),null}let i=Ot({or:a,and:n}),l=`${e?`${e.compositeName.fullName}/`:""}${i.name||"gate"}`,u=d({name:`${l}.set`,sid:i.sid?`${i.sid}|set`:void 0}),c=d({name:`${l}.open`,sid:i.sid?`${i.sid}|open`:void 0}),f=d({name:`${l}.close`,sid:i.sid?`${i.sid}|close`:void 0}),p=m(Boolean(0),{name:`${l}.status`,serialize:"ignore"}).on(c,(()=>Boolean(1))).on(f,(()=>Boolean(0))),h=m(t,{name:`${l}.state`,sid:i.sid}).on(u,((e,t)=>t)).on(c,((e,t)=>t)).reset(f);if(e){let{hooks:t}=e;s({target:[t.store,t.store,t.event,t.event,t.event],params:[p,h,c,f,u]})}return o.open=c,o.close=f,o.status=p,o.state=h,o.set=u,rt(`Gate:${l}`,o)})(vt(it,e))}let bt=e=>{throw Error(e)},St="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;const{useSyncExternalStore:kt}=et,{useSyncExternalStoreWithSelector:wt}=Ze,xt=(e,t)=>t?t.getState(e):e.getState(),$t=(e,t)=>e!==t,Ct=n.createContext(null);let{Provider:jt}=Ct,Rt=e=>console.error(`${e} is deprecated`),At=(e,t,r)=>(Rt("createContextComponent"),rt(`${e.shortName||"Unknown"}.ContextComponent`,(a=>{let o=n.useContext(t),i=ut(e);return r(a,i,o)}))),Et=e=>t=>{let r=e;return"function"!=typeof e&&(r=t,t=e),rt(`Connect(${r.displayName||r.name||"Unknown"})`,(e=>n.createElement(r,{...e,...ut(t)})))},Nt=(e,t)=>(Rt("createReactState"),Et(t)(e)),Mt=e=>"object"==typeof e&&null!==e,Ot=(e,t={})=>(Mt(e)&&(Ot(e.or,t),(e=>{for(let a in e)n=a,(e=>void 0===e)(r=e[a])||"or"===n||"and"===n||(t[n]=r);var r,n})(e),Ot(e.and,t)),t)}}]);